# üéä –ü–†–û–ë–õ–ï–ú–ê –° –ö–û–ú–ò–°–°–ò–ï–ô –†–ï–®–ï–ù–ê!

## üìã –ß—Ç–æ –±—ã–ª–æ –Ω–µ —Ç–∞–∫

### –ü—Ä–æ–±–ª–µ–º–∞ 1: ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è
**–§–∞–π–ª:** `packages/frontend/src/components/CraftPanel.tsx`
```typescript
// ‚ùå –ë–´–õ–û:
await craft(recipeId, '0x0000000000000000000000000000000000000000');

// ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û:
await craft(recipeId, address); // –∞–¥—Ä–µ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: üî• RecipeRegistry –Ω–µ –º–æ–≥ mint —Ç–æ–∫–µ–Ω—ã
**–ü—Ä–∏—á–∏–Ω–∞:** RecipeRegistry –Ω–µ –±—ã–ª –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ UsageRights1155

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "Craft" 
2. RecipeRegistry –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–±—Ä–∞—Ç—å –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã (3 Herb + 1 Shield) ‚úÖ
3. RecipeRegistry –ø—ã—Ç–∞–µ—Ç—Å—è **mint** –≤—ã—Ö–æ–¥–Ω–æ–π –ø—Ä–µ–¥–º–µ—Ç (Blessed Shield) ‚ùå
4. **–û–®–ò–ë–ö–ê:** "caller is not the owner"
5. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è (revert)
6. –ö–æ—à–µ–ª–µ–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–û–ì–†–û–ú–ù–£–Æ –∫–æ–º–∏—Å—Å–∏—é** (100,000+ ETH) –∏–∑-–∑–∞ failed —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ–¥–∞–ª–∏ ownership UsageRights1155 ‚Üí RecipeRegistry
Transaction: 0x813ef5c5ae2d8a2f5338546139a3ddbc53792877707f3d58e24868bfde94696d
```

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è –≤ –∫—Ä–∞—Ñ—Ç–∏–Ω–≥–µ
- –§–∞–π–ª: `packages/frontend/src/components/CraftPanel.tsx` 
- –ò–∑–º–µ–Ω–µ–Ω–æ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–º–µ—Å—Ç–æ 0x000...000

### 2. –ü–µ—Ä–µ–¥–∞–Ω ownership –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- **UsageRights1155:** `0xfbA1b6DCcB692DC9b7221E66D63E9bF2c643199c`
- **–ù–æ–≤—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü:** `0x9628fa7Aaac8d27D92c4AF1F1eBF83024d0B7A04` (RecipeRegistry)
- –¢–µ–ø–µ—Ä—å RecipeRegistry –º–æ–∂–µ—Ç mint –Ω–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã –ø—Ä–∏ –∫—Ä–∞—Ñ—Ç–∏–Ω–≥–µ

### 3. –°–æ–∑–¥–∞–Ω –∞–Ω–∞–ª–∏–∑ —Ä–∞—Å—Ö–æ–¥–∞ –≥–∞–∑–∞
- –§–∞–π–ª: `GAS_ANALYSIS_RU.md`
- –û–±—ä—è—Å–Ω—è–µ—Ç –ø–æ—á–µ–º—É —Ä–∞–∑–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å—Ç–æ—è—Ç –ø–æ-—Ä–∞–∑–Ω–æ–º—É

---

## üéÆ –¢–µ–ø–µ—Ä—å –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!

### –û–∂–∏–¥–∞–µ–º–∞—è –∫–æ–º–∏—Å—Å–∏—è:

| –û–ø–µ—Ä–∞—Ü–∏—è | –ì–∞–∑ | –ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å |
|----------|-----|---------------------|
| **Mint** | ~50k | $0.01 |
| **Deposit** | ~90k | $0.018 |
| **Craft** | ~165k | $0.033 |

**–ù–∞ zkSync Sepolia testnet** - —ç—Ç–æ –µ—â—ë –¥–µ—à–µ–≤–ª–µ!

---

## üöÄ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

1. **–û–±–Ω–æ–≤–∏—Ç–µ frontend:**
```bash
cd packages/frontend
pnpm dev
```

2. **–û—Ç–∫—Ä–æ–π—Ç–µ** http://localhost:3000

3. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª—ë–∫** –∫ zkSync Sepolia (Chain ID: 300)

4. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫—Ä–∞—Ñ—Ç–∏–Ω–≥:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "Craft"
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—Ü–µ–ø—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä: 3 Herb + 1 Shield ‚Üí Blessed Shield)
   - –ù–∞–∂–º–∏—Ç–µ "Craft Item"
   - **–ö–æ–º–∏—Å—Å–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π!** (~$0.03-0.05)

---

## üìä –ü–æ—á–µ–º—É –±—ã–ª–∞ —Ç–∞–∫–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –≤ –∫–æ–º–∏—Å—Å–∏—è—Ö?

### –ú–∏–Ω—Ç (~50k –≥–∞–∑):
- –ü—Ä–æ—Å—Ç–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è: —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å –±–∞–ª–∞–Ω—Å–∞ –≤ storage
- –û–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_mint()`
- –ú–∏–Ω–∏–º—É–º –æ–ø–µ—Ä–∞—Ü–∏–π

### –î–µ–ø–æ–∑–∏—Ç (~90k –≥–∞–∑):
- ERC1155 `safeTransferFrom` (2 –∑–∞–ø–∏—Å–∏ –≤ storage)
- Callback `onERC1155Received`
- –ü—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ó–∞–ø–∏—Å—å –≤ partyBalance

### –ö—Ä–∞—Ñ—Ç–∏–Ω–≥ (~165k –≥–∞–∑):
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ transfers** –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
- **–¶–∏–∫–ª** –ø–æ –º–∞—Å—Å–∏–≤—É –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ (–∫–∞–∂–¥—ã–π ~43k –≥–∞–∑)
- **Mint** –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
- **–ü—Ä–æ–≤–µ—Ä–∫–∏** —Ä–µ—Ü–µ–ø—Ç–∞ –∏–∑ storage

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è:**
- ‚úÖ ERC1155 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞
- ‚úÖ –°–ª–æ–∂–Ω—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∫
- ‚úÖ zkSync (–æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç batch, –Ω–æ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)

---

## üîç –ö–∞–∫ —ç—Ç–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:
1. **check-ownership.js** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
2. **fix-ownership.js** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ownership
3. **check-recipes.js** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤
4. **check-contracts.js** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. ‚ùå –û—Ç–ø—Ä–∞–≤–∫–∞ –∫—Ä–∞—Ñ—Ç–∞ –Ω–∞ –Ω—É–ª–µ–≤–æ–π –∞–¥—Ä–µ—Å
2. ‚ùå RecipeRegistry –Ω–µ –º–æ–∂–µ—Ç mint (–Ω–µ owner)
3. ‚ö†Ô∏è –ü–æ–ø—ã—Ç–∫–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é ‚Üí –æ–≥—Ä–æ–º–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –≥–∞–∑–∞

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

### –î–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏**
```solidity
// –í–º–µ—Å—Ç–æ 3 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:
deposit(tokenId1, amount1); // 87k
deposit(tokenId2, amount2); // 87k  
deposit(tokenId3, amount3); // 87k
// –í—Å–µ–≥–æ: 261k

// –°–¥–µ–ª–∞—Ç—å:
depositBatch([id1, id2, id3], [amt1, amt2, amt3]); 
// –í—Å–µ–≥–æ: ~120k (—ç–∫–æ–Ω–æ–º–∏—è 50%!)
```

2. **–£–ø–∞–∫–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö** (slot packing)
```solidity
// –í–º–µ—Å—Ç–æ:
uint256 amount;  // 32 bytes
uint256 expires; // 32 bytes

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
uint128 amount;  // 16 bytes
uint128 expires; // 16 bytes
// –û–±–∞ –≤ –æ–¥–Ω–æ–º storage slot!
```

3. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üìû –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã:
- **UsageRights1155:** `0xfbA1b6DCcB692DC9b7221E66D63E9bF2c643199c`
- **PartyBackpack:** `0x03448630519fC80583b67Ae5d1F80E4f9Eb72CB9`
- **RecipeRegistry:** `0x9628fa7Aaac8d27D92c4AF1F1eBF83024d0B7A04`
- **RentalEscrow:** `0xBd047AE83778825Cdf86B4b08caa69Ee72eD3159`

### –°–µ—Ç—å:
- **Network:** zkSync Sepolia Testnet
- **RPC:** https://sepolia.era.zksync.dev
- **Chain ID:** 300
- **Explorer:** https://sepolia.explorer.zksync.io

### –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **Hash:** `0x813ef5c5ae2d8a2f5338546139a3ddbc53792877707f3d58e24868bfde94696d`
- **–î–µ–π—Å—Ç–≤–∏–µ:** Transfer ownership UsageRights1155 ‚Üí RecipeRegistry
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ

---

## ‚ú® –ò—Ç–æ–≥

üéâ **–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!**

- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- ‚úÖ RecipeRegistry –º–æ–∂–µ—Ç mint —Ç–æ–∫–µ–Ω—ã
- ‚úÖ –ö–æ–º–∏—Å—Å–∏—è –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è (~$0.03-0.05 –≤–º–µ—Å—Ç–æ $100,000+)
- ‚úÖ –í—Å—ë –≥–æ—Ç–æ–≤–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫—Ä–∞—Ñ—Ç–∏–Ω–≥ —Å–µ–π—á–∞—Å - –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–ª–∏—á–Ω–æ! üöÄ**

