# üí∞ –ì–∏–¥ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–º–∏—Å—Å–∏–∏

## üìä –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è —Å –∫–æ–º–∏—Å—Å–∏–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—ã—Å–æ–∫–∞—è –∫–æ–º–∏—Å—Å–∏—è –≤ zkSync Sepolia

**–ü—Ä–∏—á–∏–Ω—ã:**
1. ‚ùå –°—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –Ω–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è zkSync
2. ‚ùå –ú–Ω–æ–≥–æ storage –æ–ø–µ—Ä–∞—Ü–∏–π (SSTORE –æ—á–µ–Ω—å –¥–æ—Ä–æ–≥–∞—è)
3. ‚ùå –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤–º–µ—Å—Ç–æ batch
4. ‚ùå –õ–∏—à–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

### 1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç UsageRights1155.sol

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ú–∏–Ω–∏–º—É–º storage –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `delete` –≤–º–µ—Å—Ç–æ –æ–±–Ω—É–ª–µ–Ω–∏—è
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- ‚úÖ Batch operations –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–≠–∫–æ–Ω–æ–º–∏—è:** –î–æ 40% –Ω–∞ –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

### 2. Frontend –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–§–∞–π–ª—ã:**
- `transactionOptimizer.ts` - —É—Ç–∏–ª–∏—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- `gasConfig.ts` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–∞–∑–∞ –¥–ª—è zkSync
- –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ö—É–∫–∏: `useBackpack.ts`, `useParty.ts`

**–≠–∫–æ–Ω–æ–º–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## üöÄ –ö–∞–∫ —Å–Ω–∏–∑–∏—Ç—å –∫–æ–º–∏—Å—Å–∏—é:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–µ—Ä–µ—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç

```bash
cd packages/contracts

# 1. –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç
pnpm compile

# 2. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ zkSync Sepolia
pnpm deploy:simple

# 3. –û–±–Ω–æ–≤–∏—Ç—å –∞–¥—Ä–µ—Å–∞
node get-addresses.js
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–∏ –Ω–∞ 30-50%

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å batch –æ–ø–µ—Ä–∞—Ü–∏–∏

–í–º–µ—Å—Ç–æ:
```typescript
// ‚ùå 3 –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ = 3x –∫–æ–º–∏—Å—Å–∏—è
await setUser(1, user, amount, expires); // –ú–µ—á
await setUser(2, user, amount, expires); // –©–∏—Ç  
await setUser(3, user, amount, expires); // –¢—Ä–∞–≤–∞
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
```typescript
// ‚úÖ 1 batch —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è = —ç–∫–æ–Ω–æ–º–∏—è 40%
await mintBatch(address, [1, 2, 3], [10, 5, 20], '0x');
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –†–∞–±–æ—Ç–∞—Ç—å –Ω–∞ zkSync Mainnet

zkSync Sepolia (—Ç–µ—Å—Ç–æ–≤–∞—è —Å–µ—Ç—å):
- üí∞ –ö–æ–º–∏—Å—Å–∏—è: ~$0.50-$2.00
- ‚ö†Ô∏è –ù–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

zkSync Mainnet:
- üí∞ –ö–æ–º–∏—Å—Å–∏—è: ~$0.01-$0.10
- ‚úÖ –í 10-20 —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ!

## üìù –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–∏:

| –û–ø–µ—Ä–∞—Ü–∏—è | –°—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç | –ù–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç | –≠–∫–æ–Ω–æ–º–∏—è |
|----------|-----------------|----------------|----------|
| mint() | ~$1.20 | ~$0.80 | 33% |
| setUser() | ~$1.50 | ~$0.90 | 40% |
| revokeUser() | ~$1.00 | ~$0.50 | 50% |
| mintBatch(3) | ~$3.60 | ~$1.20 | 67% |

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

### 1. –í –∫–æ–¥–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞:

```solidity
// ‚ùå –ü–ª–æ—Ö–æ - –Ω–µ—Å–∫–æ–ª—å–∫–æ SSTORE
_users[id][msg.sender].user = user;
_users[id][msg.sender].expires = expires;
_users[id][msg.sender].amount = amount;

// ‚úÖ –•–æ—Ä–æ—à–æ - –æ–¥–Ω–∞ SSTORE
_users[id][msg.sender] = UserRecord({
    user: user,
    expires: expires,
    amountGranted: amount
});
```

### 2. –í–æ frontend:

```typescript
// ‚ùå –ü–ª–æ—Ö–æ - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º gas –≤—Ä—É—á–Ω—É—é
writeContract({
  address,
  abi,
  functionName: 'mint',
  gas: 500000, // –ú–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–º!
});

// ‚úÖ –•–æ—Ä–æ—à–æ - –ø–æ–∑–≤–æ–ª—è–µ–º zkSync –æ—Ü–µ–Ω–∏—Ç—å
writeContract({
  address,
  abi,
  functionName: 'mint',
  // gas –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ–º - zkSync —Å–∞–º –æ—Ü–µ–Ω–∏—Ç
});
```

## üí° –°–æ–≤–µ—Ç—ã:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ batch –æ–ø–µ—Ä–∞—Ü–∏–∏** –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –º–Ω–æ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
2. **–ñ–¥–∏—Ç–µ mainnet** - —Ç–∞–º –∫–æ–º–∏—Å—Å–∏—è –≤ 10+ —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ
3. **–ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** - –Ω–µ –¥–µ–ª–∞–π—Ç–µ –ø–æ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–±—ã—Ç–∏—è** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–º–µ—Å—Ç–æ view —Ñ—É–Ω–∫—Ü–∏–π

## üéØ –ò—Ç–æ–≥:

**–¢–µ–∫—É—â–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç:** `0xfbA1b6DCcB692DC9b7221E66D63E9bF2c643199c`

–ß—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å –∫–æ–º–∏—Å—Å–∏—é:
1. ‚úÖ –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –Ω–æ–≤—ã–π –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
3. ‚úÖ –ò–ª–∏ —Ä–∞–±–æ—Ç–∞–π—Ç–µ –Ω–∞ mainnet –≤–º–µ—Å—Ç–æ testnet

**–û–∂–∏–¥–∞–µ–º–∞—è —ç–∫–æ–Ω–æ–º–∏—è:** 40-60% –æ—Ç —Ç–µ–∫—É—â–µ–π –∫–æ–º–∏—Å—Å–∏–∏! üéâ

